<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸ ì›¹ ë²ˆì—­ê¸°</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; background-color: #f0f2f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { width: 100%; max-width: 600px; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #002451; margin-bottom: 25px; }
        
        .section-label { font-size: 13px; color: #666; margin-bottom: 8px; font-weight: bold; }
        textarea { width: 100%; height: 150px; padding: 15px; border: 1px solid #ddd; border-radius: 10px; resize: none; font-size: 15px; box-sizing: border-box; transition: border 0.3s; }
        textarea:focus { border-color: #002451; outline: none; }

        .controls { display: flex; justify-content: space-between; align-items: center; margin: 20px 0; gap: 10px; }
        select { flex: 1; padding: 10px; border-radius: 8px; border: 1px solid #ddd; cursor: pointer; }
        
        /* ì¹˜í™˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .swap-btn { background-color: #f8f9fa; border: 1px solid #ccc; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: background 0.2s; }
        .swap-btn:hover { background-color: #e2e6ea; }

        .translate-btn { width: 100%; padding: 15px; background-color: #002451; color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; transition: background 0.3s; }
        .translate-btn:hover { background-color: #001a3d; }

        #resultArea { width: 100%; min-height: 150px; margin-top: 10px; padding: 15px; background-color: #f9f9f9; border: 1px solid #ddd; border-radius: 10px; font-size: 15px; box-sizing: border-box; white-space: pre-wrap; word-break: break-all; }
        .status { font-size: 12px; color: #007bff; margin-top: 5px; text-align: right; height: 18px; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸŒ DeepL ìŠ¤ë§ˆíŠ¸ ë²ˆì—­ê¸°</h2>
    
    <div class="section-label">ë²ˆì—­í•  ë‚´ìš© (ìë™ ì–¸ì–´ ê°ì§€)</div>
    <textarea id="inputText" placeholder="ì—¬ê¸°ì— ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
    
    <div class="status" id="detectedLang"></div>

    <div class="controls">
        <button class="swap-btn" onclick="swapContent()" title="ìœ„ì•„ë˜ ë‚´ìš© ë°”ê¾¸ê¸°">â‡… ë‚´ìš© ì¹˜í™˜</button>
        <select id="targetLang">
            <option value="KO">í•œêµ­ì–´ë¡œ ë²ˆì—­</option>
            <option value="EN">ì˜ì–´ë¡œ ë²ˆì—­</option>
            <option value="JA">ì¼ë³¸ì–´ë¡œ ë²ˆì—­</option>
            <option value="ZH">ì¤‘êµ­ì–´ë¡œ ë²ˆì—­</option>
            <option value="DE">ë…ì¼ì–´ë¡œ ë²ˆì—­</option>
            <option value="FR">í”„ë‘ìŠ¤ì–´ë¡œ ë²ˆì—­</option>
        </select>
    </div>

    <button class="translate-btn" onclick="translateText()">ë²ˆì—­ ì‹¤í–‰</button>

    <div class="section-label" style="margin-top: 25px;">ë²ˆì—­ ê²°ê³¼</div>
    <div id="resultArea">ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
</div>

<script>
    // --- [ì£¼ì˜] ì—¬ê¸°ì— ë³¸ì¸ì˜ API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” ---
    const API_KEY = "a703cc7a-b212-4099-89f3-15938922f568:fx"; 
    // -------------------------------------------

    // 1. ì¹˜í™˜ ê¸°ëŠ¥: ì…ë ¥ì°½ê³¼ ê²°ê³¼ì°½ì˜ í…ìŠ¤íŠ¸ë¥¼ ì„œë¡œ ë°”ê¿‰ë‹ˆë‹¤.
    function swapContent() {
        const inputArea = document.getElementById('inputText');
        const resultArea = document.getElementById('resultArea');
        
        const tempText = inputArea.value;
        const currentResult = resultArea.innerText;

        // ê²°ê³¼ì°½ì´ ì´ˆê¸° ìƒíƒœê°€ ì•„ë‹ ë•Œë§Œ ì¹˜í™˜
        if (currentResult !== "ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤." && currentResult !== "ë²ˆì—­ ì¤‘...") {
            inputArea.value = currentResult;
            resultArea.innerText = tempText;
        } else if (inputArea.value !== "") {
            // ì…ë ¥ì°½ì—ë§Œ ê¸€ì´ ìˆì„ ê²½ìš° ê²°ê³¼ì°½ìœ¼ë¡œ ë³´ë‚´ê¸°
            resultArea.innerText = inputArea.value;
            inputArea.value = "";
        }
    }

    // 2. ë²ˆì—­ ê¸°ëŠ¥: DeepL APIë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
    async function translateText() {
        const text = document.getElementById('inputText').value;
        const targetLang = document.getElementById('targetLang').value;
        const resultArea = document.getElementById('resultArea');
        const detectedLabel = document.getElementById('detectedLang');

        if (!text.trim()) {
            alert("ë²ˆì—­í•  ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        resultArea.innerText = "ë²ˆì—­ ì¤‘...";
        detectedLabel.innerText = "";

        try {
            const response = await fetch(`https://api-free.deepl.com/v2/translate`, {
                method: 'POST',
                headers: {
                    'Authorization': `DeepL-Auth-Key ${API_KEY}`,
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: new URLSearchParams({
                    'text': text,
                    'target_lang': targetLang
                })
            });

            const data = await response.json();

            if (data.translations && data.translations.length > 0) {
                resultArea.innerText = data.translations[0].text;
                detectedLabel.innerText = `ê°ì§€ëœ ì–¸ì–´: ${data.translations[0].detected_source_language}`;
            } else {
                resultArea.innerText = "ë²ˆì—­ ì‹¤íŒ¨: API ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”.";
            }
        } catch (error) {
            resultArea.innerText = "ì˜¤ë¥˜ ë°œìƒ: " + error.message;
            console.error(error);
        }
    }
</script>

</body>
</html>