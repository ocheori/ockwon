<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ë§Œì˜ ìŠ¤ë§ˆíŠ¸ ë²ˆì—­ê¸°</title>
    <style>
        :root { --main-blue: #002451; --bg-gray: #f4f7f9; }
        body { font-family: 'Malgun Gothic', sans-serif; background-color: var(--bg-gray); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; box-sizing: border-box; }
        .container { width: 100%; max-width: 550px; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: var(--main-blue); margin-top: 0; }
        
        .label { font-size: 13px; font-weight: bold; color: #555; margin: 15px 0 5px 0; }
        textarea { width: 100%; height: 140px; padding: 15px; border: 1px solid #ddd; border-radius: 10px; resize: none; font-size: 16px; box-sizing: border-box; }
        
        .btn-row { display: flex; justify-content: space-between; align-items: center; margin: 15px 0; gap: 10px; }
        .swap-btn { background: #fff; border: 1px solid #ccc; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-size: 14px; white-space: nowrap; }
        .swap-btn:hover { background: #eee; }
        
        select { flex: 1; padding: 10px; border-radius: 5px; border: 1px solid #ccc; font-size: 14px; }
        
        .translate-btn { width: 100%; padding: 15px; background: var(--main-blue); color: white; border: none; border-radius: 10px; font-size: 17px; font-weight: bold; cursor: pointer; }
        .translate-btn:active { transform: scale(0.98); }

        #result { width: 100%; min-height: 140px; background: #f9f9f9; border: 1px solid #ddd; border-radius: 10px; padding: 15px; box-sizing: border-box; font-size: 16px; white-space: pre-wrap; word-break: break-all; margin-top: 5px; }
        .footer-info { font-size: 12px; color: #888; text-align: right; margin-top: 5px; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸŒ Smart Translator</h2>
    
    <div class="label">ì…ë ¥ (ì–¸ì–´ ìë™ ê°ì§€)</div>
    <textarea id="inputText" placeholder="ë²ˆì—­í•  ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
    
    <div class="btn-row">
        <button class="swap-btn" onclick="handleSwap()">â‡… ë‚´ìš© ì¹˜í™˜</button>
        <select id="targetLang">
            <option value="KO">í•œêµ­ì–´ë¡œ ë²ˆì—­</option>
            <option value="EN">ì˜ì–´ë¡œ ë²ˆì—­</option>
            <option value="JA">ì¼ë³¸ì–´ë¡œ ë²ˆì—­</option>
            <option value="ZH">ì¤‘êµ­ì–´ë¡œ ë²ˆì—­</option>
            <option value="FR">í”„ë‘ìŠ¤ì–´ë¡œ ë²ˆì—­</option>
            <option value="DE">ë…ì¼ì–´ë¡œ ë²ˆì—­</option>
        </select>
    </div>

    <button class="translate-btn" onclick="startTranslation()">ë²ˆì—­ ì‹¤í–‰</button>

    <div class="label">ë²ˆì—­ ê²°ê³¼</div>
    <div id="result">ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
    <div class="footer-info" id="langStatus"></div>
</div>

<script>
    // --- [ì¤‘ìš”] ì—¬ê¸°ì— ë³¸ì¸ì˜ API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” ---
    const MY_DEEPL_KEY = "a703cc7a-b212-4099-89f3-15938922f568:fx"; 
    // --------------------------------------------

    // 1. ì¹˜í™˜ ê¸°ëŠ¥ (ìœ„ì•„ë˜ ë‚´ìš© ë°”ê¾¸ê¸°)
    function handleSwap() {
        const inputField = document.getElementById('inputText');
        const resultField = document.getElementById('result');
        
        const temp = inputField.value;
        // ê²°ê³¼ì°½ì´ ë¹„ì–´ìˆì§€ ì•Šì„ ë•Œë§Œ ì¹˜í™˜
        if (resultField.innerText && resultField.innerText !== "ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤." && resultField.innerText !== "ë²ˆì—­ ì¤‘...") {
            inputField.value = resultField.innerText;
            resultField.innerText = temp;
        }
    }

    // 2. ë²ˆì—­ ì‹¤í–‰ ê¸°ëŠ¥ (CORS ëŒ€ì‘ ë°©ì‹)
    async function startTranslation() {
        const text = document.getElementById('inputText').value;
        const target = document.getElementById('targetLang').value;
        const resultDisplay = document.getElementById('result');
        const statusDisplay = document.getElementById('langStatus');

        if (!text.trim()) {
            alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        resultDisplay.innerText = "ë²ˆì—­ ì¤‘...";
        statusDisplay.innerText = "";

        try {
            // ë¸Œë¼ìš°ì € ì°¨ë‹¨ì„ í”¼í•˜ê¸° ìœ„í•´ auth_keyë¥¼ bodyì— í¬í•¨í•˜ì—¬ ì „ì†¡
            const response = await fetch("https://api-free.deepl.com/v2/translate", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded",
                },
                body: new URLSearchParams({
                    "auth_key": MY_DEEPL_KEY,
                    "text": text,
                    "target_lang": target
                })
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.message || "ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜");
            }

            const data = await response.json();
            
            if (data.translations && data.translations.length > 0) {
                resultDisplay.innerText = data.translations[0].text;
                statusDisplay.innerText = "ê°ì§€ëœ ì–¸ì–´: " + data.translations[0].detected_source_language;
            }

        } catch (error) {
            console.error(error);
            resultDisplay.innerText = "ì˜¤ë¥˜ ë°œìƒ: " + error.message;
            alert("ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. API í‚¤ë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ê±°ë‚˜ ì ì‹œ í›„ ì‹œë„í•˜ì„¸ìš”.");
        }
    }
</script>

</body>
</html>